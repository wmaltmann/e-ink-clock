import framebuf

BITMAPS = {
'0':'00000000000000000000000000000000000000000000000000000000000003fffffffffffc001fffffffffff8008fffffffffff100c7fffffffffe300e3fffffffffc700f1fffffffff8f00f8fffffffff1f00fc7fffffffe3f00fe0000000007f00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00fe0000000007f00fc0000000003f00f80000000001f00f00000000000f00000000000000000000000000000000f00000000000f00f80000000001f00fc0000000003f00fe0000000007f00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00fe0000000007f00fc7fffffffe3f00f8fffffffff1f00f1fffffffff8f00e3fffffffffc700c7fffffffffe3008fffffffffff1001fffffffffff8003fffffffffffc0000000000000000000000000000000000000000000000000000000000000',
'1':'0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000300000000000000700000000000000f00000000000001f00000000000003f00000000000007f0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff00000000000007f00000000000003f00000000000001f00000000000000f00000000000000000000000000000000000000000000f00000000000001f00000000000003f00000000000007f0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff00000000000007f00000000000003f00000000000001f00000000000000f0000000000000070000000000000030000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
'2':'00000000000000000000000000000000000000000000000000000000000003fffffffffffc001fffffffffff8000fffffffffff10007fffffffffe30003fffffffffc70001fffffffff8f0000fffffffff1f00007fffffffe3f00000000000007f0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff00000000000007f00007fffffffe3f0000fffffffff1f0001fffffffff8f0003fffffffffc00003fffffffffc000f1fffffffff8000f8fffffffff0000fc7fffffffe0000fe0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000fe0000000000000fc7fffffffe0000f8fffffffff0000f1fffffffff8000e3fffffffffc000c7fffffffffe0008fffffffffff0001fffffffffff8003fffffffffffc0000000000000000000000000000000000000000000000000000000000000',
'3':'00000000000000000000000000000000000000000000000000000000000003fffffffffffc001fffffffffff8000fffffffffff10007fffffffffe30003fffffffffc70001fffffffff8f0000fffffffff1f00007fffffffe3f00000000000007f0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff00000000000007f00007fffffffe3f0000fffffffff1f0001fffffffff8f0003fffffffffc00003fffffffffc00001fffffffff8f0000fffffffff1f00007fffffffe3f00000000000007f0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff00000000000007f00007fffffffe3f0000fffffffff1f0001fffffffff8f0003fffffffffc70007fffffffffe3000fffffffffff1001fffffffffff8003fffffffffffc0000000000000000000000000000000000000000000000000000000000000',
'4':'0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000100c00000000000300e00000000000700f00000000000f00f80000000001f00fc0000000003f00fe0000000007f00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00fe0000000007f00fc7fffffffe3f00f8fffffffff1f00f1fffffffff8f0003fffffffffc00003fffffffffc00001fffffffff8f0000fffffffff1f00007fffffffe3f00000000000007f0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff00000000000007f00000000000003f00000000000001f00000000000000f0000000000000070000000000000030000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
'5':'00000000000000000000000000000000000000000000000000000000000003fffffffffffc001fffffffffff8008fffffffffff000c7fffffffffe000e3fffffffffc000f1fffffffff8000f8fffffffff0000fc7fffffffe0000fe0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000fe0000000000000fc7fffffffe0000f8fffffffff0000f1fffffffff800003fffffffffc00003fffffffffc00001fffffffff8f0000fffffffff1f00007fffffffe3f00000000000007f0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff00000000000007f00007fffffffe3f0000fffffffff1f0001fffffffff8f0003fffffffffc70007fffffffffe3000fffffffffff1001fffffffffff8003fffffffffffc0000000000000000000000000000000000000000000000000000000000000',
'6':'00000000000000000000000000000000000000000000000000000000000003fffffffffffc001fffffffffff8008fffffffffff000c7fffffffffe000e3fffffffffc000f1fffffffff8000f8fffffffff0000fc7fffffffe0000fe0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000fe0000000000000fc7fffffffe0000f8fffffffff0000f1fffffffff800003fffffffffc00003fffffffffc000f1fffffffff8f00f8fffffffff1f00fc7fffffffe3f00fe0000000007f00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00fe0000000007f00fc7fffffffe3f00f8fffffffff1f00f1fffffffff8f00e3fffffffffc700c7fffffffffe3008fffffffffff1001fffffffffff8003fffffffffffc0000000000000000000000000000000000000000000000000000000000000',
'7':'00000000000000000000000000000000000000000000000000000000000003fffffffffffc001fffffffffff8000fffffffffff10007fffffffffe30003fffffffffc70001fffffffff8f0000fffffffff1f00007fffffffe3f00000000000007f0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff00000000000007f00000000000003f00000000000001f00000000000000f00000000000000000000000000000000000000000000f00000000000001f00000000000003f00000000000007f0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff00000000000007f00000000000003f00000000000001f00000000000000f0000000000000070000000000000030000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
'8':'00000000000000000000000000000000000000000000000000000000000003fffffffffffc001fffffffffff8008fffffffffff100c7fffffffffe300e3fffffffffc700f1fffffffff8f00f8fffffffff1f00fc7fffffffe3f00fe0000000007f00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00fe0000000007f00fc7fffffffe3f00f8fffffffff1f00f1fffffffff8f0003fffffffffc00003fffffffffc000f1fffffffff8f00f8fffffffff1f00fc7fffffffe3f00fe0000000007f00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00fe0000000007f00fc7fffffffe3f00f8fffffffff1f00f1fffffffff8f00e3fffffffffc700c7fffffffffe3008fffffffffff1001fffffffffff8003fffffffffffc0000000000000000000000000000000000000000000000000000000000000',
'9':'00000000000000000000000000000000000000000000000000000000000003fffffffffffc001fffffffffff8008fffffffffff100c7fffffffffe300e3fffffffffc700f1fffffffff8f00f8fffffffff1f00fc7fffffffe3f00fe0000000007f00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00ff000000000ff00fe0000000007f00fc7fffffffe3f00f8fffffffff1f00f1fffffffff8f0003fffffffffc00003fffffffffc00001fffffffff8f0000fffffffff1f00007fffffffe3f00000000000007f0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff0000000000000ff00000000000007f00000000000003f00000000000001f00000000000000f0000000000000070000000000000030000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
' ':'000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
';':'000000000000000000000000000000000000000000000000183c7effff7e3c1800000000000000000000000000000000183c7effff7e3c18000000000000000000000000000000000000000000000000',
':':'000000000000000000000000000000000000000000000000ffffffffffffffff00000000000000000000000000000000ffffffffffffffff000000000000000000000000000000000000000000000000',
'AM':'00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007060c07071c0d87bc0d87fc0886ec18c64c1fc60c38e60c30660c000000000000000000000000000000000000',
'PM':'0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001f860c19c71c18c7bc18c7fc19c6ec1f864c18060c18060c18060c000000000000000000000000000000000000',
}

HEIGHT = 80

def write_time_font(fb:framebuf.FrameBuffer, char, x_offset, y_offset):
    width = 60
    if char == ':' or char == ';':
        width = 8
    elif char == 'PM' or char == 'AM':
        width = 24    
    bit_array = _hex_string_to_bit_array(BITMAPS.get(char))
    if bit_array is None:
        return

    if len(bit_array) < width * HEIGHT:
        raise ValueError("Hex string does not contain enough bits for this image")

    i = 0
    for y in range(HEIGHT):
        for x in range(width):
            bit = bit_array[i]
            fb.pixel(x + x_offset, y + y_offset, 0x00 if bit == 1 else 0xFF)
            i += 1

def _hex_string_to_bit_array(hex_string):
    bit_array = []
    for i in range(0, len(hex_string), 2):
        byte = int(hex_string[i:i+2], 16)
        for j in range(8):
            bit_array.append((byte >> (7 - j)) & 1)
    return bit_array